pipeline {
    agent any

    environment {
        AZURE_CLIENT_ID       = credentials('azure-client-id')
        AZURE_CLIENT_SECRET    = credentials('azure-client-secret')
        AZURE_TENANT_ID        = credentials('azure-tenant-id')
        AZURE_SUBSCRIPTION_ID  = credentials('azure-subscription-id')
    }

    stages {
        stage('Deploy to Azure') {
            steps {
                echo "Deploying to Azure..."
                sh '''
                    az login --service-principal \
                        -u $AZURE_CLIENT_ID \
                        -p $AZURE_CLIENT_SECRET \
                        --tenant $AZURE_TENANT_ID

                    az account set --subscription $AZURE_SUBSCRIPTION_ID
                    # Your terraform or deployment commands
                '''
            }
        }
    }

    post {
        failure {
            echo "‚ùå Deployment failed"
        }
    }
}
